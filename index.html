<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cyber Password Challenge</title>

<style>
  :root{
    --bg:#021a2e;
    --panel:#051f33;
    --text:#ffffff;
    --title:#4aa3ff;
    --muted:#7ca4d4;
    --red:#b8324b;
    --green:#18a36f;
    font-family:"Segoe UI",Roboto,"Noto Naskh Arabic",system-ui
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text)}

  .wrap{
    max-width:900px;margin:20px auto 40px;padding:22px;
    background:var(--panel);border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,.3)
  }

  h1{text-align:center;font-size:22px;color:var(--title);margin-bottom:20px}

  .game{display:grid;grid-template-columns:1fr 320px;gap:16px}
  @media(max-width:880px){.game{grid-template-columns:1fr}}

  label{margin-bottom:6px;color:var(--muted);display:block}
  input[type="text"]{
    width:100%;padding:12px;border-radius:8px;
    border:1px solid rgba(255,255,255,.15);
    background:transparent;color:white;font-size:16px;
    direction:ltr;text-align:left
  }

  .conditions{margin-top:16px;display:flex;flex-direction:column;gap:8px}

  .cond{
    padding:12px;border-radius:8px;background:rgba(255,255,255,.03);
    display:flex;justify-content:space-between;align-items:center;
    border:2px solid rgba(255,255,255,.1)
  }

  .status{display:flex;gap:8px}
  .dot{width:10px;height:10px;border-radius:50%}
  .dot.red{background:var(--red)}
  .dot.green{background:var(--green)}
  .cond.red{border-color:var(--red)}
  .cond.green{border-color:var(--green)}

  .final-message{
    display:none;font-size:20px;font-weight:bold;
    color:#4aa3ff;text-align:center;margin-top:20px
  }

  #submitBtn{
    display:none;
    width:100%;
    padding:12px;
    margin-top:20px;
    background:#1e88e5;
    color:white;
    font-size:18px;
    border:0;
    border-radius:8px;
    cursor:pointer
  }
</style>
</head>

<body>

<div class="wrap">

  <h1>Cyber Password Challenge</h1>

  <div class="game">

    <div>
      <label>Ø§Ø³Ù…Ùƒ:</label>
      <input id="playerName" type="text" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§...">

      <label style="margin-top:12px;">Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
      <input id="pwd" type="text" placeholder="Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±â€¦" autocorrect="off" autocapitalize="off">

      <div class="small">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…: <span id="digitSum">0</span></div>

      <div class="conditions" id="conditionsContainer"></div>
    </div>

    <div>
      <div class="final-message" id="successRight">
        ÙƒÙÙˆ ğŸ‘ğŸ»ğŸŠ  
        <br><br>
        <strong>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</strong><br>
        Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…Ù„Ùƒ Ø®Ø§Ù„Ø¯
      </div>

      <button id="submitBtn" onclick="submitScore()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
    </div>

  </div>
</div>


<script>

async function sendToSheet(name, password){
  const url = "https://sheetdb.io/api/v1/ne2nh5rseh84o"; 
  const data = {
    data:{
      timestamp: new Date().toLocaleString("en-US",{ timeZone:"Asia/Riyadh" }),
      name: name,
      password: password
    }
  };
  await fetch(url,{
    method:"POST",
    headers:{ "Content-Type":"application/json"},
    body: JSON.stringify(data)
  });
  alert("âœ” ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ù†Ø¬Ø§Ø­!");
}

const A={
  minLen:14,
  mitreTech:"T1047",
  lolbin:"rundll32.exe",
  dfirArtifact:"prefetch",
  blueTeamTool:"Velociraptor",
  redTeamTool:"BloodHound",
  hashAlgo:"bcrypt",
  osintSite:"Virustotal",
  grcFramework:"ISO27001",
  vaptPort:"3389",
  threatActor:"APT41",
  rareExt:[".lnk",".hta",".vbs"],
  triageArtifact:"MFT",
  nfcrm:"NFCRM-1:2025"
};

const CONDITIONS=[
  { key:'minLen', title:'Ø§Ø¨Ø¯Ø£ Ø¨Ù‚ÙˆØ©â€¦ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø£Ù‚Ù„ Ù…Ù† 14 Ø­Ø±Ù Ù…Ø§ ØªØ¹ÙŠØ´ Ø«Ø§Ù†ÙŠØ© ÙˆØ­Ø¯Ø©ğŸ›¡ï¸' },
  { key:'hasDigit', title:'Ø¨Ø³ Ø­Ø±ÙˆÙØŸ ÙˆÙŠÙ† Ø§Ù„Ø£Ø±Ù‚Ø§Ù…ØŸØŸØŸğŸ”¢' },
  { key:'hasUpper', title:'Ø­Ø±ÙˆÙÙƒ ØµØºÙŠØ±Ø© Ù…Ø§ ØªÙ†Ø´Ø§Ùâ€«...â€¬ Ø¥Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ ØªÙƒØ¨Ø±.ğŸ”' },
  { key:'hasLower', title:'Ù…Ø§ ÙÙŠÙ‡ Ø­Ø±Ù ØµØºÙŠØ± Ù…Ù†Ø§ ÙˆÙ„Ø§ Ù…Ù†Ø§ØŸğŸ‘€' },
  { key:'hasSpecial', title:'Ù…Ø¹Ù„ÙŠØ´ Ø±Ù…Ø² Ø®Ø§Øµ Ø¨Ø§Ù„Ù„Ù‡â€«...â€¬ Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø³Ø§ÙŠØ¨Ø± Ø§Ù„Ù„Ù‡ ÙŠØ¹ÙŠÙ† Ø¹Ù„ÙŠÙ‡Ù…ğŸ˜®â€ğŸ’¨' },
  { key:'mitreTech', title:'ØªÙ‚Ù†ÙŠØ© MITREâ€¦ Ù„Ù‡Ø§ Ø¹Ù„Ø§Ù‚Ø© Ø¨Ù€ WMI' },
  { key:'lolbin', title:'LOLBIN ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚Ø§Øª Ø§Ù„ØµØ§Ù…ØªØ©â€¦' },
  { key:'dfirArtifact', title:'Artifact DFIR Ù…Ø´Ù‡ÙˆØ± ÙÙŠ ÙˆÙŠÙ†Ø¯ÙˆØ². Ø£ÙˆÙ„ Ø´ÙŠØ¡ ÙŠÙ†ÙƒØ¨ Ø§Ù„Ù…Ù‡Ø§Ø¬Ù… Ù„Ù…Ø§ ÙŠØ´ØºÙ„ Ø¨Ø±Ù†Ø§Ù…Ø¬' },
  { key:'blueTeamTool', title:'Ø£Ø¯Ø§Ø© DFIR Ø±Ù‡ÙŠØ¨Ø© Ø¨Ø³ Ù…Ø§ Ø§Ù†Ù‚Ø±Ø¶Øª Ø²ÙŠ Ø§Ù„Ø¯ÙŠÙ†Ø§ØµÙˆØ±Ø§Øªâ€«............â€¬ Ø¨Ø³ Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„ØªÙ„Ù…ÙŠØ­' },
  { key:'redTeamTool', title:' Ø£Ø¯Ø§Ø© Ù‡Ø¬ÙˆÙ… ØªØ³ØªØ®Ø¯Ù… Ù„ØªÙÙƒÙŠÙƒ Active Directoryâ€¦ ğŸ©¸ğŸ¶Ø§Ø³Ù…Ù‡Ø§ Ø¯Ù…ÙˆÙŠ Ø´ÙˆÙŠ.' },
  { key:'hashAlgo', title:'Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Hash Ù‚ÙˆÙŠØ©â€¦ Ø£Ù‚ÙˆÙ‰ Ù…Ù† SHA.' },
  { key:'osintSite', title:'Ù…ÙˆÙ‚Ø¹ OSINT Ù„ÙØ­Øµ Ø§Ù„Ù…Ù„ÙØ§ØªØŒ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·ØŒ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†ØŒ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø¨ÙŠÙ†Ù‡Ù…ØŒ Ø³ÙˆØ§Ù„Ù Ø§Ù„Ù†Ø§Ø³ Ø¹Ù†Ù‡Ù…ØŒ ÙˆÙ„Ùˆ ØªØ¨ØºÙ‰ Ø±Ø³Ù… Ù„Ùƒ Ø®Ø±ÙŠØ·Ø©â€«...â€¬ Ù…Ø­Ø²Ù…ğŸ«¡.' },
  { key:'grcFramework', title:'Ø¥Ø·Ø§Ø± GRC Ø¹Ø§Ù„Ù…ÙŠâ€«.â€¬ Ø¥Ø°Ø§ Ù…Ø§ Ø¹Ø±ÙØªÙ‡ ÙŠØ§ ÙˆÙŠÙ„Ùƒ Ù…Ù† Ø§Ù„Ù…Ø¯Ù‚Ù‚' },
  { key:'vaptPort', title:'Ø¨ÙˆØ±Øª Ù…ÙÙŠØ¯ Ù„ÙƒÙ„ Ø§Ù„Ù†Ø§Ø³ Ø­ØªÙ‰ Ø§Ù„Ù‡Ø§ÙƒØ± ÙŠØ®Ù„ÙŠÙƒ ØªÙˆØµÙ„ Ù„Ù„Ø¬Ù‡Ø§Ø² Ø¹Ù† Ø¨Ø¹Ø¯â€«....â€¬ Ø¨Ø³ Ø§Ù„Ø±Ù‚Ù…â€«.â€¬' },
  { key:'threatActor', title:'Ù…Ø¬Ù…ÙˆØ¹Ø© APT Ù‡Ø¬ÙŠÙ†Ø©â€«...â€¬ Ø§Ø­ØªØ§Ø¬ Ø±Ù…Ø²Ù‡Ù…ØŒ Ø§Ù„ØªÙ„Ù…ÙŠØ­â€«:â€¬ ğŸ‰ğŸ‰' },
  { key:'rareExt', title:'Ø§Ù…ØªØ¯Ø§Ø¯ Ù…Ù„Ù ØªÙ†ÙÙŠØ°ÙŠ Ø®Ø·ÙŠØ±â€¦ Ø¨Ø³ÙŠØ· Ù„ÙƒÙ†Ù‡ ÙŠÙØªØ­ Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ù‡Ø¬ÙˆÙ…â€«...â€¬ Ù…Ùˆ EXEØŒ ØªØ­Ø³Ø¨ Ø¨Ø£Ø®Ù„ÙŠ Ù„Ùƒ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø³Ù‡Ù„Ø©ØŸ' },
  { key:'triageArtifact',title:'Artefact Ø±Ø¦ÙŠØ³ÙŠ ÙÙŠ NTFS ØªÙƒØ´Ù Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ù„ÙØ§Øª ÙƒÙ„Ù‡Ø§â€¦ Ù…ÙŠØ²Ø© ÙŠØ¹Ø±ÙÙ‡Ø§ Ù…Ø­Ù‚Ù‘Ù‚ Ø±Ù‚Ù…ÙŠ Ù…Ø­ØªØ±Ùâ€«...â€¬' },
  { key:'nfcrm', title:'Ø¥Ø·Ø§Ø± ÙˆØ·Ù†ÙŠ Ø¬Ø¯ÙŠØ¯ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø±â€«...â€¬ ÙˆØ·Ù†ÙŠâ€«....â€¬ ÙˆØ·Ù†ÙŠÙŠÙŠÙŠÙŠÙŠÙŠÙŠÙŠ Ø§Ù„Ù„ÙŠ Ø¨ÙŠÙƒØªØ¨ ISO 31000 ÙŠØ§ ÙˆÙŠÙ„Ù‡' },
  { key:'noSpaces', title:'Ù…Ù…Ù†ÙˆØ¹ ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø§ÙØ§Øªâ€¦ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ù‚Ø·Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©' },
  { key:'digitSum', title:'Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† 100.â€«....â€¬ Ù„Ø£Ù†â€«.....â€¬ ÙˆØ§Ù„Ù„Ù‡ Ù…Ø§ Ø¹Ù†Ø¯ÙŠ Ø³Ø¨Ø¨ Ø¨Ø³ ÙƒØ°Ø§â€«..â€¬ Ù…Ø¹Ù„ÙŠØ´' }
];

function ci(s,p){return s.toLowerCase().includes(p.toLowerCase())}
function sumDigits(s){return (s.match(/\d/g)||[]).map(Number).reduce((a,b)=>a+b,0)}
function hasUpper(s){return /[A-Z]/.test(s)}
function hasLower(s){return /[a-z]/.test(s)}
function hasDigit(s){return /\d/.test(s)}
function hasSpecial(s){return /[!@#\$%\^\&*()\-_=\+\[\]{};:'",.<>\/?\\|`~]/.test(s)}

function tokenIsIsolatedAnywhere(str,token){
  let i=0;
  while(true){
    const idx=str.indexOf(token,i);
    if(idx===-1)return false;
    const L=idx-1,R=idx+token.length;
    const ld=L>=0&&/\d/.test(str[L]);
    const rd=R<str.length&&/\d/.test(str[R]);
    if(!(ld||rd))return true;
    i=idx+1;
  }
}

function validateAll(s){
  const r={};
  r.minLen=s.length>=A.minLen;
  r.hasDigit=hasDigit(s);
  r.hasUpper=hasUpper(s);
  r.hasLower=hasLower(s);
  r.hasSpecial=hasSpecial(s);

  r.mitreTech=tokenIsIsolatedAnywhere(s,A.mitreTech);
  r.lolbin=ci(s,A.lolbin);
  r.dfirArtifact=ci(s,A.dfirArtifact);
  r.blueTeamTool=ci(s,A.blueTeamTool);
  r.redTeamTool=ci(s,A.redTeamTool);
  r.hashAlgo=ci(s,A.hashAlgo);
  r.osintSite=ci(s,A.osintSite);
  r.grcFramework=ci(s,A.grcFramework);
  r.vaptPort=tokenIsIsolatedAnywhere(s,A.vaptPort);
  r.threatActor=ci(s,A.threatActor);
  r.triageArtifact=ci(s,A.triageArtifact);
  r.nfcrm=ci(s,A.nfcrm);

  r.rareExt=A.rareExt.some(ext=>s.toLowerCase().includes(ext));
  r.noSpaces=!(/\s/.test(s));
  r.digitSum=sumDigits(s)>100;

  return r;
}

const container=document.getElementById('conditionsContainer');
const pwdInput=document.getElementById('pwd');
const nameInput=document.getElementById('playerName');
const digitSumBox=document.getElementById('digitSum');
const successRight=document.getElementById('successRight');
const submitBtn=document.getElementById('submitBtn');
let elems={},revealedCount=1;

function makeEl(c){
  const el=document.createElement('div');
  el.className='cond red';
  el.dataset.key=c.key;

  const left=document.createElement('div');
  left.textContent=c.title;

  const right=document.createElement('div');
  right.className='status';

  const dot=document.createElement('span');
  dot.className='dot red';
  dot.id='dot-'+c.key;

  const label=document.createElement('span');
  label.id='label-'+c.key;
  label.textContent='ØºÙŠØ± Ù…ØªØ­Ù‚Ù‚';

  right.appendChild(label);
  right.appendChild(dot);
  el.appendChild(left);
  el.appendChild(right);
  return el;
}

function init(){
  for(const c of CONDITIONS){
    elems[c.key+'__el']=makeEl(c);
  }
  render(validateAll(''));
}

function findActiveIndex(results){
  for(let i=0;i<revealedCount;i++){
    if(!results[CONDITIONS[i].key]) return i;
  }
  return -1;
}

function cascadeReveal(results){
  while(findActiveIndex(results)===-1 && revealedCount<CONDITIONS.length){
    revealedCount++;
  }
}

function render(results){
  digitSumBox.textContent=sumDigits(pwdInput.value||'');

  container.innerHTML='';

  const activeIdx=findActiveIndex(results);
  if(activeIdx!==-1){
    const k=CONDITIONS[activeIdx].key;
    const el=elems[k+'__el'];

    el.classList.add('red');
    el.classList.remove('green');
    el.querySelector('#dot-'+k).className='dot red';
    el.querySelector('#label-'+k).textContent='ØºÙŠØ± Ù…ØªØ­Ù‚Ù‚';

    container.appendChild(el);
  }

  const rest=[];
  for(let i=0;i<revealedCount;i++){
    if(i!==activeIdx) rest.push(CONDITIONS[i]);
  }

  rest.forEach(c=>{
    const el=elems[c.key+'__el'];
    const ok=results[c.key];

    el.classList.toggle('green',ok);
    el.classList.toggle('red',!ok);
    el.querySelector('#dot-'+c.key).className='dot '+(ok?'green':'red');
    el.querySelector('#label-'+c.key).textContent=ok?'Ù…ØªØ­Ù‚Ù‚':'ØºÙŠØ± Ù…ØªØ­Ù‚Ù‚';

    container.appendChild(el);
  });

  const complete=CONDITIONS.every(c=>results[c.key]);

  successRight.style.display = complete ? 'block' : 'none';
  submitBtn.style.display    = complete ? 'block' : 'none';
}

function tick(){
  const val=pwdInput.value||'';
  const res=validateAll(val);
  cascadeReveal(res);
  render(res);
}

function submitScore(){
  sendToSheet(nameInput.value||"Unknown", pwdInput.value);
}

pwdInput.addEventListener('input',tick);
init();

</script>
</body>
</html>
